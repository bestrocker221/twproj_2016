<div class="container-fluid">
    <div class="row">
        <table id="table_id" class="display">
            <thead>
            <tr>
                <th>Descrizione</th>
                <th>Data</th>
                <th>Numero partecipanti</th>
            </tr>
            </thead>
        </table>
    </div>
</div>
<script>
$(document).ready(function () {
    addToBreadcrumbs("Eventi");

    initTable();

    /**
     * Add Table data
     */
    $.get("/core/cusb/event-manager.php", function (data) {
        var json = JSON.parse(data);
        for (var n = 0; n < json.length ; n++) {
            var rowNode = t_data
                .row.add([
                    json[n]["description"],
                    json[n]["date"],
                    json[n]["n_partec"]
                ])
                .draw()
                .node();
            if(json[n]['iscritto'] == "yes"){
                $( rowNode )
                    .addClass("tr-row-disabled")
                    .animate( { color: 'black' } );

            }


            /*
            t_data.row.add([
                json[n]["description"],
                json[n]["date"],
                json[n]["n_partec"]
            ]).draw();*/
        }
    });


    loadModal();

    /**
     * Set rows event
     */
    $("#table_id tbody").on("click", "tr", function () {
        var subscribed = 1;
        var button;
        if (subscribed == 1) {
            button = "<button type='button' class='btn btn-success' data-dismiss='modal'>Iscriviti</button>";
        } else {
            button = "<button type='button' class='btn btn-danger' data-dismiss='modal'>Annulla iscrizione</button>";
        }
        $(".modal-title").html(t_data.row(this).data()[0]);
        $(".modal-body").html("testo");
        $(".modal-footer").html(button +
            "<button type='button' class='btn btn-default' data-dismiss='modal'>Chiudi</button>");
        $("#myModal").modal('show');
    });
});
</script>