<div class="container-fluid">
    <div class="row">
        <h6>Tornei</h6>
        <div class="filter-tournaments">
            <button type="button" class="btn btn-filter">Calcetto</button>
            <button type="button" class="btn btn-filter">Basket</button>
            <button type="button" class="btn btn-filter">Pallavolo</button>
            <button type="button" class="btn btn-filter">Tennis</button>
            <button type="button" class="btn btn-filter btn-danger">Reset</button>
        </div>
        <table id="tournaments-table" class="display">
            <thead>
            <tr>
                <th>Nome</th>
                <th>Descrizione</th>
                <th>Sport</th>
                <th>Data evento</th>
                <th>Campo</th>
                <th>Data iscrizione</th>
            </tr>
            </thead>
        </table>
    </div>
    <div class="row">
        <h6>Allenamenti</h6>
        <div class="filter-trainings">
            <button type="button" class="btn btn-filter">Calcetto</button>
            <button type="button" class="btn btn-filter">Basket</button>
            <button type="button" class="btn btn-filter">Pallavolo</button>
            <button type="button" class="btn btn-filter">Tennis</button>
            <button type="button" class="btn btn-filter btn-danger">Reset</button>
        </div>
        <table id="trainings-table" class="display">
            <thead>
            <tr>
                <th>Sport</th>
                <th>Data</th>
            </tr>
            </thead>
        </table>
    </div>
    <div class="row">
        <h6>Eventi</h6>
        <table id="events-table" class="display">
            <thead>
            <tr>
                <th>Descrizione</th>
                <th>Data</th>
                <th>Numero partecipanti</th>
            </tr>
            </thead>
        </table>
    </div>
</div>
<script>
    addToBreadcrumbs("Iscrizioni");

    tourn_data = initTable("tournaments-table");

    /**
     * Add Tournaments Table data
     */
    $.get("/core/cusb/tournaments-manager.php", function (data) {
        var json = JSON.parse(data);
        for (var n = 0; n < json.length; n++) {
            var subscribed;
            if(json[n]['iscritto'] == null){
                n++;
            } else {
                var rowNode = tourn_data.row.add([
                    json[n]["title"],
                    json[n]["description"],
                    json[n]["of_what"],
                    json[n]["date"],
                    json[n]["id_field"],
                    json[n]['iscritto']
                ])
                    .draw()
                    .node();
            }

            $(rowNode).attr('id', json[n]["id_tourn"]);
        }
    });


    train_data = initTable("trainings-table");
    /**
     * Add Trainings Table data
     */
    $.get("/core/cusb/training-manager.php", function (data) {
        var json = JSON.parse(data);
        for (var n = 0; n < json.length; n++) {
            if(json[n]['iscritto'] != "yes"){
                n++;
            } else {
                var rowNode = train_data.row.add([
                    json[n]["of_what"],
                    json[n]["date"]
                ])
                    .draw()
                    .node();
            }
            $(rowNode).attr('id', json[n]["id_training"]);
        }
    });

    event_data = initTable("events-table");
    /**
     * Add Trainings Table data
     */
    $.get("/core/cusb/event-manager.php", function (data) {
        var json = JSON.parse(data);
        for (var n = 0; n < json.length; n++) {
            if(json[n]['iscritto'] != "yes"){
                n++;
            } else {
                var rowNode = event_data.row.add([
                    json[n]["description"],
                    json[n]["date"],
                    json[n]["n_partec"]
                ])
                    .draw()
                    .node();
            }
            $(rowNode).attr('id', json[n]["id_training"]);
        }
    });

    $(".filter-tournaments .btn-filter").on('click',function () {
        buttonFilterTable(tourn_data,$(this));
    });

    $(".filter-trainings .btn-filter").on('click',function () {
        buttonFilterTable(train_data,$(this));
    });

</script>